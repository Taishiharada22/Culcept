-- generated by scripts/make-rewrite-sql.ts
-- map: public/db_urls.map.json
-- mappings: 158

begin;
create temp table tmp_url_map(old_url text primary key, new_url text not null);

insert into tmp_url_map(old_url, new_url) values
  ('/cards/007ff09c_9ed2_46bf_a320_28967612d434_2_2_3.png','/cards/007ff09c_9ed2_46bf_a320_28967612d434_2_3.png'),
  ('/cards/0ccdd583_cc35_4e5e_b3f8_2d346d7d18a7_2_2_3.png','/cards/0ccdd583_cc35_4e5e_b3f8_2d346d7d18a7_2_3.png'),
  ('/cards/1aa7bf8c_d64a_4429_b1ba_6345a841af20_2_2_3.png','/cards/1aa7bf8c_d64a_4429_b1ba_6345a841af20_2_3.png'),
  ('/cards/338aac68_eb22_4ed4_8f2b_26ac747648d6_2_2_3.png','/cards/338aac68_eb22_4ed4_8f2b_26ac747648d6_2_3.png'),
  ('/cards/3efc337c_35f4_4b7f_9470_a2c88ad8e969_2_2_3.png','/cards/3efc337c_35f4_4b7f_9470_a2c88ad8e969_2_3.png'),
  ('/cards/4524145e_c9d8_4daf_9e27_2bfb799e763a_2_2_3.png','/cards/4524145e_c9d8_4daf_9e27_2bfb799e763a_2_3.png'),
  ('/cards/552d3691_be94_4a43_9576_fa85ed65bf08_2_2_3.png','/cards/552d3691_be94_4a43_9576_fa85ed65bf08_2_3.png'),
  ('/cards/5f976bba_ff96_417b_b1a5_817a6642fa20_2_2_3.png','/cards/5f976bba_ff96_417b_b1a5_817a6642fa20_2_3.png'),
  ('/cards/620a3d9c_5e84_4be0_ad35_88a65f9ac5e3_2_2_3.png','/cards/620a3d9c_5e84_4be0_ad35_88a65f9ac5e3_2_3.png'),
  ('/cards/6acd2043_ad54_4242_94ee_58fc9ace7097_2_2_3.png','/cards/6acd2043_ad54_4242_94ee_58fc9ace7097_2_3.png'),
  ('/cards/6d21e60e_795b_4fb0_85e0_21e5a9372128_2_2_3.png','/cards/6d21e60e_795b_4fb0_85e0_21e5a9372128_2_3.png'),
  ('/cards/6eb10bcd_bb51_42dd_aca1_2cc54330464a_2_2_3.png','/cards/6eb10bcd_bb51_42dd_aca1_2cc54330464a_2_3.png'),
  ('/cards/838a3b51_f679_4fef_8d79_887d3003bb5a_2_2_3.png','/cards/838a3b51_f679_4fef_8d79_887d3003bb5a_2_3.png'),
  ('/cards/87279b7a_5b3b_4dc6_a462_1acf9fa9629f_2_2_3.png','/cards/87279b7a_5b3b_4dc6_a462_1acf9fa9629f_2_3.png'),
  ('/cards/8c5f2ec7_6e54_40c3_b777_f6e3e8a88ef4_2_2_3.png','/cards/8c5f2ec7_6e54_40c3_b777_f6e3e8a88ef4_2_3.png'),
  ('/cards/8d9839d6_5260_4544_9dda_326ab3c9d7fc_2_2_3.png','/cards/8d9839d6_5260_4544_9dda_326ab3c9d7fc_2_3.png'),
  ('/cards/95bffe7b_24d7_4e8f_843b_03e1965f6ac6_2_2_3.png','/cards/95bffe7b_24d7_4e8f_843b_03e1965f6ac6_2_3.png'),
  ('/cards/9f3b1a8c_4d3a_43e8_b0a6_aa1beaa219d2_2_2_3.png','/cards/9f3b1a8c_4d3a_43e8_b0a6_aa1beaa219d2_2_3.png'),
  ('/cards/a259919f_5f94_47be_ad05_00179e0a942d_2_2_3.png','/cards/a259919f_5f94_47be_ad05_00179e0a942d_2_3.png'),
  ('/cards/a298c204_16bf_4127_a9ef_a681c1f0e599_2_2_3.png','/cards/a298c204_16bf_4127_a9ef_a681c1f0e599_2_3.png'),
  ('/cards/a7d32cef_28c1_4c28_9733_9231b77a7651_2_2_3.png','/cards/a7d32cef_28c1_4c28_9733_9231b77a7651_2_3.png'),
  ('/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_1_2_2_3.png','/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_1_2_3.png','/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_2_3.png','/cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('/cards/ab07b77b_97c2_43ac_9566_f3f28ed3be44_2_2_3.png','/cards/ab07b77b_97c2_43ac_9566_f3f28ed3be44_2_3.png'),
  ('/cards/acc6b7b6_5c87_41f8_b3ad_071f8f93897b_2_2_3.png','/cards/acc6b7b6_5c87_41f8_b3ad_071f8f93897b_2_3.png'),
  ('/cards/aef62f6d_6077_49a3_a921_1b331b464177_2_2_3.png','/cards/aef62f6d_6077_49a3_a921_1b331b464177_2_3.png'),
  ('/cards/b40e10d9_186d_47cd_bc97_730a9c985e31_2_2_3.png','/cards/b40e10d9_186d_47cd_bc97_730a9c985e31_2_3.png'),
  ('/cards/b65c88be_9490_48a9_be1f_5393bc168a03_2_2_3.png','/cards/b65c88be_9490_48a9_be1f_5393bc168a03_2_3.png'),
  ('/cards/b79dc3d4_b593_4726_807c_205942bdbadd_2_2_3.png','/cards/b79dc3d4_b593_4726_807c_205942bdbadd_2_3.png'),
  ('/cards/bd57a086_cf89_4b67_85b4_38ea91be9c50_2_2_3.png','/cards/bd57a086_cf89_4b67_85b4_38ea91be9c50_2_3.png'),
  ('/cards/black_denim_2.png','/cards/black_denim.png'),
  ('/cards/black_denim_4.png','/cards/black_denim_3.png'),
  ('/cards/brown_2.png','/cards/brown.png'),
  ('/cards/c011b843_de6e_4428_8e9a_c4ff51124450_2_2_3.png','/cards/c011b843_de6e_4428_8e9a_c4ff51124450_2_3.png'),
  ('/cards/c300422a_1cea_4afe_823c_efc272c13c5e_2_2_3.png','/cards/c300422a_1cea_4afe_823c_efc272c13c5e_2_3.png'),
  ('/cards/c7d08b84_d501_47ec_b9f2_c7e4ba73d23d_2_2_3.png','/cards/c7d08b84_d501_47ec_b9f2_c7e4ba73d23d_2_3.png'),
  ('/cards/c88166ac_2d05_4179_999f_36c247814ffb_2_2_3.png','/cards/c88166ac_2d05_4179_999f_36c247814ffb_2_3.png'),
  ('/cards/ca16eff2_8137_4c7b_b615_500fc8780c22_2_2_3.png','/cards/ca16eff2_8137_4c7b_b615_500fc8780c22_2_3.png'),
  ('/cards/cbed0ab6_8aac_45a7_ad7f_fb4a641deaac_2_2_3.png','/cards/cbed0ab6_8aac_45a7_ad7f_fb4a641deaac_2_3.png'),
  ('/cards/cde974a0_eafb_4adf_95b8_2ec51498d5d1_2_2_3.png','/cards/cde974a0_eafb_4adf_95b8_2ec51498d5d1_2_3.png'),
  ('/cards/chatgpt_image_2026_1_29_22_17_56_2_2_3.png','/cards/chatgpt_image_2026_1_29_22_17_56_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_11_52_57_2_2_3.png','/cards/chatgpt_image_2026_1_30_11_52_57_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_12_50_11_2_2_3.png','/cards/chatgpt_image_2026_1_30_12_50_11_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_13_06_52_2_2_3.png','/cards/chatgpt_image_2026_1_30_13_06_52_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_13_09_10_2_2_3.png','/cards/chatgpt_image_2026_1_30_13_09_10_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_13_15_56_2_2_3.png','/cards/chatgpt_image_2026_1_30_13_15_56_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_18_50_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_18_50_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_18_53_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_18_53_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_22_37_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_22_37_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_26_03_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_26_03_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_34_16_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_34_16_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_36_14_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_36_14_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_37_03_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_37_03_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_40_02_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_40_02_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_41_00_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_41_00_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_41_46_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_41_46_2_3.png'),
  ('/cards/chatgpt_image_2026_1_30_16_43_30_2_2_3.png','/cards/chatgpt_image_2026_1_30_16_43_30_2_3.png'),
  ('/cards/d3bcfef3_ddc0_42b7_b6d7_344950d25109_2_2_3.png','/cards/d3bcfef3_ddc0_42b7_b6d7_344950d25109_2_3.png'),
  ('/cards/d99b53f5_38e0_43a0_b51d_967e28a34cd3_2_2_3.png','/cards/d99b53f5_38e0_43a0_b51d_967e28a34cd3_2_3.png'),
  ('/cards/de5f00a1_52da_4342_8894_9fa82c556e65_2_2_3.png','/cards/de5f00a1_52da_4342_8894_9fa82c556e65_2_3.png'),
  ('/cards/e6391474_a8b1_49b1_b6c4_bc03f70e50bd_2_2_3.png','/cards/e6391474_a8b1_49b1_b6c4_bc03f70e50bd_2_3.png'),
  ('/cards/e7d5bea6_e5c4_40ec_9b27_6f6699a6ab56_2_2_3.png','/cards/e7d5bea6_e5c4_40ec_9b27_6f6699a6ab56_2_3.png'),
  ('/cards/ebe459f3_6e43_4d32_b2a4_566fd240b404_2_2_3.png','/cards/ebe459f3_6e43_4d32_b2a4_566fd240b404_2_3.png'),
  ('/cards/f485045b_e9f9_4197_b861_6741857cecf2_2_2_3.png','/cards/f485045b_e9f9_4197_b861_6741857cecf2_2_3.png'),
  ('/cards/f63a9d02_754e_4d15_8821_6ee51ff48500_2_2_3.png','/cards/f63a9d02_754e_4d15_8821_6ee51ff48500_2_3.png'),
  ('/cards/f668f834_b897_456c_bcae_03d44deb1ba6_2_2_3.png','/cards/f668f834_b897_456c_bcae_03d44deb1ba6_2_3.png'),
  ('/cards/f745615c_b2d6_4402_9cee_bddc85d5291d_2_2_3.png','/cards/f745615c_b2d6_4402_9cee_bddc85d5291d_2_3.png'),
  ('/cards/fb15cd9a_571d_4d95_a1ad_4561f03b7eb8_2_2_3.png','/cards/fb15cd9a_571d_4d95_a1ad_4561f03b7eb8_2_3.png'),
  ('/cards/fc487925_5af6_4235_b490_4382be39f6bb_2_2_3.png','/cards/fc487925_5af6_4235_b490_4382be39f6bb_2_3.png'),
  ('/cards/field_jacket_2.png','/cards/field_jacket.png'),
  ('/cards/field_jacket_black_2.png','/cards/field_jacket_black.png'),
  ('/cards/field_jacket_navy_2.png','/cards/field_jacket_navy.png'),
  ('/cards/field_jacket_olive_2.png','/cards/field_jacket_olive.png'),
  ('/cards/jacket_black_2.png','/cards/jacket_black.png'),
  ('/cards/placeholder_2.png','/cards/field_jacket_olive.png'),
  ('/cards/shirt_2.png','/cards/shirt.png'),
  ('/cards/shirt_4.png','/cards/shirt_3.png'),
  ('/cards/shirt_brown_2.png','/cards/shirt_brown.png'),
  ('cards/007ff09c_9ed2_46bf_a320_28967612d434_2_2_3.png','cards/007ff09c_9ed2_46bf_a320_28967612d434_2_3.png'),
  ('cards/0ccdd583_cc35_4e5e_b3f8_2d346d7d18a7_2_2_3.png','cards/0ccdd583_cc35_4e5e_b3f8_2d346d7d18a7_2_3.png'),
  ('cards/1aa7bf8c_d64a_4429_b1ba_6345a841af20_2_2_3.png','cards/1aa7bf8c_d64a_4429_b1ba_6345a841af20_2_3.png'),
  ('cards/338aac68_eb22_4ed4_8f2b_26ac747648d6_2_2_3.png','cards/338aac68_eb22_4ed4_8f2b_26ac747648d6_2_3.png'),
  ('cards/3efc337c_35f4_4b7f_9470_a2c88ad8e969_2_2_3.png','cards/3efc337c_35f4_4b7f_9470_a2c88ad8e969_2_3.png'),
  ('cards/4524145e_c9d8_4daf_9e27_2bfb799e763a_2_2_3.png','cards/4524145e_c9d8_4daf_9e27_2bfb799e763a_2_3.png'),
  ('cards/552d3691_be94_4a43_9576_fa85ed65bf08_2_2_3.png','cards/552d3691_be94_4a43_9576_fa85ed65bf08_2_3.png'),
  ('cards/5f976bba_ff96_417b_b1a5_817a6642fa20_2_2_3.png','cards/5f976bba_ff96_417b_b1a5_817a6642fa20_2_3.png'),
  ('cards/620a3d9c_5e84_4be0_ad35_88a65f9ac5e3_2_2_3.png','cards/620a3d9c_5e84_4be0_ad35_88a65f9ac5e3_2_3.png'),
  ('cards/6acd2043_ad54_4242_94ee_58fc9ace7097_2_2_3.png','cards/6acd2043_ad54_4242_94ee_58fc9ace7097_2_3.png'),
  ('cards/6d21e60e_795b_4fb0_85e0_21e5a9372128_2_2_3.png','cards/6d21e60e_795b_4fb0_85e0_21e5a9372128_2_3.png'),
  ('cards/6eb10bcd_bb51_42dd_aca1_2cc54330464a_2_2_3.png','cards/6eb10bcd_bb51_42dd_aca1_2cc54330464a_2_3.png'),
  ('cards/838a3b51_f679_4fef_8d79_887d3003bb5a_2_2_3.png','cards/838a3b51_f679_4fef_8d79_887d3003bb5a_2_3.png'),
  ('cards/87279b7a_5b3b_4dc6_a462_1acf9fa9629f_2_2_3.png','cards/87279b7a_5b3b_4dc6_a462_1acf9fa9629f_2_3.png'),
  ('cards/8c5f2ec7_6e54_40c3_b777_f6e3e8a88ef4_2_2_3.png','cards/8c5f2ec7_6e54_40c3_b777_f6e3e8a88ef4_2_3.png'),
  ('cards/8d9839d6_5260_4544_9dda_326ab3c9d7fc_2_2_3.png','cards/8d9839d6_5260_4544_9dda_326ab3c9d7fc_2_3.png'),
  ('cards/95bffe7b_24d7_4e8f_843b_03e1965f6ac6_2_2_3.png','cards/95bffe7b_24d7_4e8f_843b_03e1965f6ac6_2_3.png'),
  ('cards/9f3b1a8c_4d3a_43e8_b0a6_aa1beaa219d2_2_2_3.png','cards/9f3b1a8c_4d3a_43e8_b0a6_aa1beaa219d2_2_3.png'),
  ('cards/a259919f_5f94_47be_ad05_00179e0a942d_2_2_3.png','cards/a259919f_5f94_47be_ad05_00179e0a942d_2_3.png'),
  ('cards/a298c204_16bf_4127_a9ef_a681c1f0e599_2_2_3.png','cards/a298c204_16bf_4127_a9ef_a681c1f0e599_2_3.png'),
  ('cards/a7d32cef_28c1_4c28_9733_9231b77a7651_2_2_3.png','cards/a7d32cef_28c1_4c28_9733_9231b77a7651_2_3.png'),
  ('cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_1_2_2_3.png','cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_1_2_3.png','cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_2_3.png','cards/aa9efa40_c029_4ee7_945e_1590d7b4fa3c_2_3.png'),
  ('cards/ab07b77b_97c2_43ac_9566_f3f28ed3be44_2_2_3.png','cards/ab07b77b_97c2_43ac_9566_f3f28ed3be44_2_3.png'),
  ('cards/acc6b7b6_5c87_41f8_b3ad_071f8f93897b_2_2_3.png','cards/acc6b7b6_5c87_41f8_b3ad_071f8f93897b_2_3.png'),
  ('cards/aef62f6d_6077_49a3_a921_1b331b464177_2_2_3.png','cards/aef62f6d_6077_49a3_a921_1b331b464177_2_3.png'),
  ('cards/b40e10d9_186d_47cd_bc97_730a9c985e31_2_2_3.png','cards/b40e10d9_186d_47cd_bc97_730a9c985e31_2_3.png'),
  ('cards/b65c88be_9490_48a9_be1f_5393bc168a03_2_2_3.png','cards/b65c88be_9490_48a9_be1f_5393bc168a03_2_3.png'),
  ('cards/b79dc3d4_b593_4726_807c_205942bdbadd_2_2_3.png','cards/b79dc3d4_b593_4726_807c_205942bdbadd_2_3.png'),
  ('cards/bd57a086_cf89_4b67_85b4_38ea91be9c50_2_2_3.png','cards/bd57a086_cf89_4b67_85b4_38ea91be9c50_2_3.png'),
  ('cards/black_denim_2.png','cards/black_denim.png'),
  ('cards/black_denim_4.png','cards/black_denim_3.png'),
  ('cards/brown_2.png','cards/brown.png'),
  ('cards/c011b843_de6e_4428_8e9a_c4ff51124450_2_2_3.png','cards/c011b843_de6e_4428_8e9a_c4ff51124450_2_3.png'),
  ('cards/c300422a_1cea_4afe_823c_efc272c13c5e_2_2_3.png','cards/c300422a_1cea_4afe_823c_efc272c13c5e_2_3.png'),
  ('cards/c7d08b84_d501_47ec_b9f2_c7e4ba73d23d_2_2_3.png','cards/c7d08b84_d501_47ec_b9f2_c7e4ba73d23d_2_3.png'),
  ('cards/c88166ac_2d05_4179_999f_36c247814ffb_2_2_3.png','cards/c88166ac_2d05_4179_999f_36c247814ffb_2_3.png'),
  ('cards/ca16eff2_8137_4c7b_b615_500fc8780c22_2_2_3.png','cards/ca16eff2_8137_4c7b_b615_500fc8780c22_2_3.png'),
  ('cards/cbed0ab6_8aac_45a7_ad7f_fb4a641deaac_2_2_3.png','cards/cbed0ab6_8aac_45a7_ad7f_fb4a641deaac_2_3.png'),
  ('cards/cde974a0_eafb_4adf_95b8_2ec51498d5d1_2_2_3.png','cards/cde974a0_eafb_4adf_95b8_2ec51498d5d1_2_3.png'),
  ('cards/chatgpt_image_2026_1_29_22_17_56_2_2_3.png','cards/chatgpt_image_2026_1_29_22_17_56_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_11_52_57_2_2_3.png','cards/chatgpt_image_2026_1_30_11_52_57_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_12_50_11_2_2_3.png','cards/chatgpt_image_2026_1_30_12_50_11_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_13_06_52_2_2_3.png','cards/chatgpt_image_2026_1_30_13_06_52_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_13_09_10_2_2_3.png','cards/chatgpt_image_2026_1_30_13_09_10_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_13_15_56_2_2_3.png','cards/chatgpt_image_2026_1_30_13_15_56_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_18_50_2_2_3.png','cards/chatgpt_image_2026_1_30_16_18_50_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_18_53_2_2_3.png','cards/chatgpt_image_2026_1_30_16_18_53_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_22_37_2_2_3.png','cards/chatgpt_image_2026_1_30_16_22_37_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_26_03_2_2_3.png','cards/chatgpt_image_2026_1_30_16_26_03_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_34_16_2_2_3.png','cards/chatgpt_image_2026_1_30_16_34_16_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_36_14_2_2_3.png','cards/chatgpt_image_2026_1_30_16_36_14_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_37_03_2_2_3.png','cards/chatgpt_image_2026_1_30_16_37_03_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_40_02_2_2_3.png','cards/chatgpt_image_2026_1_30_16_40_02_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_41_00_2_2_3.png','cards/chatgpt_image_2026_1_30_16_41_00_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_41_46_2_2_3.png','cards/chatgpt_image_2026_1_30_16_41_46_2_3.png'),
  ('cards/chatgpt_image_2026_1_30_16_43_30_2_2_3.png','cards/chatgpt_image_2026_1_30_16_43_30_2_3.png'),
  ('cards/d3bcfef3_ddc0_42b7_b6d7_344950d25109_2_2_3.png','cards/d3bcfef3_ddc0_42b7_b6d7_344950d25109_2_3.png'),
  ('cards/d99b53f5_38e0_43a0_b51d_967e28a34cd3_2_2_3.png','cards/d99b53f5_38e0_43a0_b51d_967e28a34cd3_2_3.png'),
  ('cards/de5f00a1_52da_4342_8894_9fa82c556e65_2_2_3.png','cards/de5f00a1_52da_4342_8894_9fa82c556e65_2_3.png'),
  ('cards/e6391474_a8b1_49b1_b6c4_bc03f70e50bd_2_2_3.png','cards/e6391474_a8b1_49b1_b6c4_bc03f70e50bd_2_3.png'),
  ('cards/e7d5bea6_e5c4_40ec_9b27_6f6699a6ab56_2_2_3.png','cards/e7d5bea6_e5c4_40ec_9b27_6f6699a6ab56_2_3.png'),
  ('cards/ebe459f3_6e43_4d32_b2a4_566fd240b404_2_2_3.png','cards/ebe459f3_6e43_4d32_b2a4_566fd240b404_2_3.png'),
  ('cards/f485045b_e9f9_4197_b861_6741857cecf2_2_2_3.png','cards/f485045b_e9f9_4197_b861_6741857cecf2_2_3.png'),
  ('cards/f63a9d02_754e_4d15_8821_6ee51ff48500_2_2_3.png','cards/f63a9d02_754e_4d15_8821_6ee51ff48500_2_3.png'),
  ('cards/f668f834_b897_456c_bcae_03d44deb1ba6_2_2_3.png','cards/f668f834_b897_456c_bcae_03d44deb1ba6_2_3.png'),
  ('cards/f745615c_b2d6_4402_9cee_bddc85d5291d_2_2_3.png','cards/f745615c_b2d6_4402_9cee_bddc85d5291d_2_3.png'),
  ('cards/fb15cd9a_571d_4d95_a1ad_4561f03b7eb8_2_2_3.png','cards/fb15cd9a_571d_4d95_a1ad_4561f03b7eb8_2_3.png'),
  ('cards/fc487925_5af6_4235_b490_4382be39f6bb_2_2_3.png','cards/fc487925_5af6_4235_b490_4382be39f6bb_2_3.png'),
  ('cards/field_jacket_2.png','cards/field_jacket.png'),
  ('cards/field_jacket_black_2.png','cards/field_jacket_black.png'),
  ('cards/field_jacket_navy_2.png','cards/field_jacket_navy.png'),
  ('cards/field_jacket_olive_2.png','cards/field_jacket_olive.png'),
  ('cards/jacket_black_2.png','cards/jacket_black.png'),
  ('cards/placeholder_2.png','cards/field_jacket_olive.png'),
  ('cards/shirt_2.png','cards/shirt.png'),
  ('cards/shirt_4.png','cards/shirt_3.png'),
  ('cards/shirt_brown_2.png','cards/shirt_brown.png');

-- TARGET: public.curated_cards.image_url
update public.curated_cards as x
set image_url = m.new_url
from tmp_url_map m
where x.image_url = m.old_url;

update public.curated_cards as x
set image_url = replace(x.image_url, m.old_url, m.new_url)
from tmp_url_map m
where x.image_url is not null
  and x.image_url like '%' || m.old_url || '%'
  and not exists (
    select 1 from tmp_url_map m2
    where x.image_url like '%' || m2.old_url || '%'
      and m2.old_url <> m.old_url
  );

select 'public.curated_cards.image_url' as target,
  (select count(*) from public.curated_cards x join tmp_url_map m on x.image_url = m.old_url) as remaining_exact,
  (select count(*) from public.curated_cards x where exists (select 1 from tmp_url_map m where x.image_url like '%'||m.old_url||'%')) as remaining_contains;

commit;
