{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/haradataishi/Culcept/app/drops/DropsFilters.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nfunction uniq(arr: string[]) {\n    const out: string[] = [];\n    for (const x of arr) if (x && !out.includes(x)) out.push(x);\n    return out;\n}\n\nfunction norm(s: string) {\n    return s.trim().replace(/\\s+/g, \" \").toLowerCase();\n}\n\nfunction parseCommaList(s: string) {\n    return s\n        .split(\",\")\n        .map((x) => norm(x))\n        .filter(Boolean)\n        .slice(0, 10);\n}\n\nexport default function DropsFilters(props: {\n    q: string;\n    brand: string;\n    size: string;\n    condition: string;\n    tags: string; // comma-separated\n    min: string;\n    max: string;\n    hasImage: string;\n    hasBuy: string;\n    sort: string;\n    mine: string;\n}) {\n    const [brand, setBrand] = React.useState(props.brand ?? \"\");\n    const [tagsText, setTagsText] = React.useState(props.tags ?? \"\");\n\n    const [brandSug, setBrandSug] = React.useState<string[]>([]);\n    const [tagSug, setTagSug] = React.useState<string[]>([]);\n    const [loadingBrand, setLoadingBrand] = React.useState(false);\n    const [loadingTag, setLoadingTag] = React.useState(false);\n\n    React.useEffect(() => {\n        setBrand(props.brand ?? \"\");\n        setTagsText(props.tags ?? \"\");\n    }, [props.brand, props.tags]);\n\n    // brand suggest\n    React.useEffect(() => {\n        const q = norm(brand);\n        if (!q) {\n            setBrandSug([]);\n            return;\n        }\n        const ac = new AbortController();\n        setLoadingBrand(true);\n        fetch(`/api/suggest?kind=brand&q=${encodeURIComponent(q)}`, { signal: ac.signal })\n            .then((r) => r.json())\n            .then((j) => setBrandSug(Array.isArray(j?.items) ? j.items : []))\n            .catch(() => { })\n            .finally(() => setLoadingBrand(false));\n        return () => ac.abort();\n    }, [brand]);\n\n    // tag suggest（最後に入力してるトークンで絞る）\n    React.useEffect(() => {\n        const parts = parseCommaList(tagsText);\n        const lastRaw = tagsText.split(\",\").pop() ?? \"\";\n        const last = norm(lastRaw);\n        if (!last) {\n            setTagSug([]);\n            return;\n        }\n        const ac = new AbortController();\n        setLoadingTag(true);\n        fetch(`/api/suggest?kind=tag&q=${encodeURIComponent(last)}`, { signal: ac.signal })\n            .then((r) => r.json())\n            .then((j) => setTagSug(Array.isArray(j?.items) ? j.items : []))\n            .catch(() => { })\n            .finally(() => setLoadingTag(false));\n        return () => ac.abort();\n    }, [tagsText]);\n\n    const addTag = (t: string) => {\n        const cur = parseCommaList(tagsText);\n        const next = uniq([...cur, norm(t)]).slice(0, 10);\n        setTagsText(next.join(\",\"));\n    };\n\n    return (\n        <form method=\"get\" action=\"/drops\" className=\"grid gap-3 rounded-xl border border-zinc-200 bg-white p-4 shadow-sm\">\n            <div className=\"grid gap-3 md:grid-cols-3\">\n                <input\n                    name=\"q\"\n                    defaultValue={props.q}\n                    placeholder=\"Search (title/description)\"\n                    className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                />\n\n                <div className=\"relative\">\n                    <input\n                        name=\"brand\"\n                        value={brand}\n                        onChange={(e) => setBrand(e.currentTarget.value)}\n                        placeholder=\"Brand\"\n                        className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                    />\n                    {(loadingBrand || brandSug.length > 0) && (\n                        <div className=\"absolute left-0 right-0 top-[calc(100%+6px)] z-10 overflow-hidden rounded-lg border border-zinc-200 bg-white shadow-lg\">\n                            {loadingBrand ? (\n                                <div className=\"px-3 py-2 text-xs font-semibold text-zinc-500\">loading...</div>\n                            ) : (\n                                <ul className=\"max-h-56 list-none overflow-auto p-0\">\n                                    {brandSug.map((b) => (\n                                        <li key={b}>\n                                            <button\n                                                type=\"button\"\n                                                onClick={() => setBrand(b)}\n                                                className=\"block w-full px-3 py-2 text-left text-sm font-semibold text-zinc-800 hover:bg-zinc-50\"\n                                            >\n                                                {b}\n                                            </button>\n                                        </li>\n                                    ))}\n                                </ul>\n                            )}\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"relative\">\n                    <input\n                        name=\"tags\"\n                        value={tagsText}\n                        onChange={(e) => setTagsText(e.currentTarget.value)}\n                        placeholder=\"Tags (comma) e.g. vintage,workwear\"\n                        className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                    />\n\n                    {(loadingTag || tagSug.length > 0) && (\n                        <div className=\"absolute left-0 right-0 top-[calc(100%+6px)] z-10 overflow-hidden rounded-lg border border-zinc-200 bg-white shadow-lg\">\n                            {loadingTag ? (\n                                <div className=\"px-3 py-2 text-xs font-semibold text-zinc-500\">loading...</div>\n                            ) : (\n                                <ul className=\"max-h-56 list-none overflow-auto p-0\">\n                                    {tagSug.map((t) => (\n                                        <li key={t}>\n                                            <button\n                                                type=\"button\"\n                                                onClick={() => addTag(t)}\n                                                className=\"block w-full px-3 py-2 text-left text-sm font-semibold text-zinc-800 hover:bg-zinc-50\"\n                                            >\n                                                #{t}\n                                            </button>\n                                        </li>\n                                    ))}\n                                </ul>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"grid gap-3 md:grid-cols-4\">\n                <input\n                    name=\"size\"\n                    defaultValue={props.size}\n                    placeholder=\"Size\"\n                    className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                />\n                <input\n                    name=\"condition\"\n                    defaultValue={props.condition}\n                    placeholder=\"Condition\"\n                    className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                />\n                <input\n                    name=\"min\"\n                    defaultValue={props.min}\n                    placeholder=\"Min price\"\n                    inputMode=\"numeric\"\n                    className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                />\n                <input\n                    name=\"max\"\n                    defaultValue={props.max}\n                    placeholder=\"Max price\"\n                    inputMode=\"numeric\"\n                    className=\"w-full rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold outline-none focus:ring-2 focus:ring-zinc-900\"\n                />\n            </div>\n\n            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div className=\"flex flex-wrap items-center gap-3\">\n                    <label className=\"flex items-center gap-2 text-xs font-extrabold text-zinc-700\">\n                        <input type=\"checkbox\" name=\"hasImage\" value=\"1\" defaultChecked={props.hasImage === \"1\"} />\n                        has image\n                    </label>\n                    <label className=\"flex items-center gap-2 text-xs font-extrabold text-zinc-700\">\n                        <input type=\"checkbox\" name=\"hasBuy\" value=\"1\" defaultChecked={props.hasBuy === \"1\"} />\n                        has buy link\n                    </label>\n                    <label className=\"flex items-center gap-2 text-xs font-extrabold text-zinc-700\">\n                        <input type=\"checkbox\" name=\"mine\" value=\"1\" defaultChecked={props.mine === \"1\"} />\n                        mine\n                    </label>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                    <select\n                        name=\"sort\"\n                        defaultValue={props.sort || \"new\"}\n                        className=\"rounded-md border border-zinc-200 px-3 py-2 text-sm font-semibold\"\n                    >\n                        <option value=\"new\">Newest</option>\n                        <option value=\"old\">Oldest</option>\n                        <option value=\"price_asc\">Price: low → high</option>\n                        <option value=\"price_desc\">Price: high → low</option>\n                    </select>\n\n                    <button\n                        type=\"submit\"\n                        className=\"rounded-md bg-zinc-900 px-4 py-2 text-sm font-extrabold text-white hover:bg-zinc-800\"\n                    >\n                        Apply\n                    </button>\n\n                    <a\n                        href=\"/drops\"\n                        className=\"rounded-md border border-zinc-200 bg-white px-4 py-2 text-sm font-extrabold text-zinc-700 no-underline hover:bg-zinc-50\"\n                    >\n                        Reset\n                    </a>\n                </div>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/haradataishi/Culcept/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}